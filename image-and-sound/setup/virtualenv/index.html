<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Installing virtualenv and friends</title>
  <meta name="description" content="">

  <link href='https://fonts.googleapis.com/css?family=Oswald:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" crossorigin="anonymous">
  
  <link rel="stylesheet" href="/css/new.css">
  
  <link rel="canonical" href="http://jonathansoma.com/lede/image-and-sound/setup/virtualenv/">
  <link rel="alternate" type="application/rss+xml" title="Things by Jonathan Soma" href="../../../../feed.xml" />
  <link rel="stylesheet" href="/css/pygments/zenburn.css"></link>
  
  <meta property=”og:description” content=”” />
  <meta property="og:title" content="Installing virtualenv and friends">
  <meta property="twitter:title" content="Installing virtualenv and friends">
  <meta property=”twitter:creator:id” content=”15921550” />
  <meta property=”twitter:description” content=”” />
  <meta property=”twitter:creator” content=”dangerscarf” />
</head>


  <body>
    <div id="wrapper">
      <div class="top-nav">
        <div class="container">
          <div class="row">
            <div class="col-sm-12">
              <strong><a href="/">Jonathan Soma</a></strong> 
              <div class="pull-right">
                <a target="_new" href="http://twitter.com/dangerscarf"><i class="fa fa-twitter fa-lg"></i></a>
                <a target="_new" href="https://instagram.com/dangerscarf"><i class="fa fa-instagram fa-lg"></i></a>
                <a target="_new" href="https://github.com/jsoma"><i class="fa fa-github fa-lg"></i></a>
                <a target="_new" href="https://tinyletter.com/jsoma"><i class="fa fa-pencil fa-lg"></i></a>
                <a target="_new" href="mailto:jonathan.soma@gmail.com"><i class="fa fa-envelope fa-lg"></i></a>
              </div>
             </form>
            </div>
          </div>
        </div>
      </div>

        <!-- Page Content -->
        <div id="page-content-wrapper">
          
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">

                      
                      
<p class="breadcrumbs"><a href="/">Home</a> &gt; <a href="../../..">Lede</a> &gt; <a href="../..">Image and Sound, Data, CJS 2017</a> &gt;  Installing virtualenv and friends</p>



                      <div class="post">

  <header class="post-header">
    <h1 class="post-title">Installing virtualenv and friends</h1>
  </header>

  <article class="post-content">
    
    <h2 id="introduction-to-virtualenv">Introduction to <code class="highlighter-rouge">virtualenv</code></h2>

<p>If you’re going to the gym, you’re going to dress one way. If you’re going to work, you’re probably going to dress another way. Python is the same! Not with clothes, though, but with packages.</p>

<p>Let’s say there’s a Python package for web scraping called BeautifulSoup (which there is!). Maybe in one project you need BeautifulSoup <em>3</em> and in one project you need BeautifulSoup <em>4</em> - <strong>in this step we’re now going to install a tool that helps keep them separate.</strong> It’s useful, too - you’ll use BeautifulSoup in just a few weeks.</p>

<p>These separate areas for separate packages (or outfits!) are called <strong>virtual environments</strong>. To control them we need to install a package called <code class="highlighter-rouge">virtualenv</code>.</p>

<h3 id="step-1-installing-virtualenv">Step 1: Installing <code class="highlighter-rouge">virtualenv</code></h3>

<p>Since <code class="highlighter-rouge">virtualenv</code> is a package, we’ll use <code class="highlighter-rouge">pip</code> to install it (“Pip Installs Packages,” remember?). Because we’re using Python 3, we use <code class="highlighter-rouge">pip3</code> - unless we’re inside of a virtual environment, <code class="highlighter-rouge">pip</code> is for Python 2.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>pip3 install virtualenv
</code></pre>
</div>

<blockquote>
  <p><strong>Read your results!</strong> If you ever get a <strong>Permission denied</strong> notice when using <code class="highlighter-rouge">pip</code>, type <code class="highlighter-rouge">sudo pip</code> instead - in this case, your command would be <code class="highlighter-rouge">sudo pip3 install virtualenv</code></p>
</blockquote>

<p>Now you’ll set <code class="highlighter-rouge">virtualenv</code> to always look for cool new Python 3 instead of terrible old Python 2.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo 'export VIRTUALENV_PYTHON=`which python3`' &gt;&gt; ~/.bash_profile
source ~/.bash_profile
</code></pre>
</div>

<p>This adds a line to our <code class="highlighter-rouge">~/.bash_profile</code> without having to open it up. If you’d like to look at it, you can <code class="highlighter-rouge">cat ~/.bash_profile</code> or <a href="../../using-the-shell/editing-hidden-files/">open it up</a></p>

<h3 id="step-2-installing-virtualenvwrapper">Step 2: Installing <code class="highlighter-rouge">virtualenvwrapper</code></h3>

<p>There are also a few add-ons to <code class="highlighter-rouge">virtualenv</code> that make <code class="highlighter-rouge">virtualenv</code> easier to use. Let’s install one of them called <code class="highlighter-rouge">virtualenvwrapper</code>. It will give us a few friendlier commands.</p>

<p><code class="highlighter-rouge">virtualenvwrapper</code> is a package, so we’ll use <code class="highlighter-rouge">pip3</code> to install it.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>pip3 install virtualenvwrapper
</code></pre>
</div>

<p>Once it’s done installing (remember the <code class="highlighter-rouge">sudo</code> note up above!), we can configure it.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>echo 'export VIRTUALENVWRAPPER_PYTHON=$VIRTUALENV_PYTHON' &gt;&gt; ~/.bash_profile
echo 'export WORKON_HOME=$HOME/.virtualenvs' &gt;&gt; ~/.bash_profile
export VIRTUALENVWRAPPER_SH_PATH=`which virtualenvwrapper.sh`
echo "source $VIRTUALENVWRAPPER_SH_PATH" &gt;&gt; ~/.bash_profile
source ~/.bash_profile
</code></pre>
</div>

<p>These lines make sure we’re using the right Python, and tells <code class="highlighter-rouge">virtualenv</code> where to store all of our outfits. And again, feel free to take a peek at the additions we’ve made to <code class="highlighter-rouge">~/.bash_profile</code> by running <code class="highlighter-rouge">cat ~/.bash_profile</code>.</p>

<h2 id="testing-it-out">Testing it out</h2>

<p>Let’s test this out with an example to make sure things work.</p>

<p>Say we’re going to make a project about <strong>schools</strong>. Let’s try to set up its virtual environment (a.k.a. the Python outfit). We’ll call it <code class="highlighter-rouge">schools</code> because we’re unimaginative.</p>

<p>If we want to work in a virtual environment, we use the <code class="highlighter-rouge">workon</code> command. Try it out:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>workon schools
</code></pre>
</div>

<p>It sure doesn’t work, though! It tells us we need to create the virtual environment before we use it, which totally makes sense. Try to run <code class="highlighter-rouge">mkvirtualenv schools</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mkvirtualenv schools
</code></pre>
</div>

<p>Now you should have <code class="highlighter-rouge">(schools)</code> next to your prompt. This is your reminder that you’re in a virtual environment!</p>

<p>But does it have our good friend Python 3 in it? Run the following commands.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>python --version
pip --version
</code></pre>
</div>

<p>Both should say something about being Python 3. Great work! No more <code class="highlighter-rouge">pip3</code> as long as we’re inside of a virtual environment.</p>

<p>Maybe our schools project needs to use BeautifulSoup, the package we mentioned before (you don’t need to know what it does yet, just know it <em>sounds interesting</em>). Since BeautifulSoup is a package, we’ll use <code class="highlighter-rouge">pip</code> to install it.</p>

<blockquote>
  <p>Because we’re in a Python 3 virtual environment, we can just call it <code class="highlighter-rouge">pip</code> instead of <code class="highlighter-rouge">pip3</code>. Think about it like outfits again - if you’re in the <strong>gym environment</strong> and I say “put on your shoes,” you’re going to put on your gym shoes, not your dress shoes.</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>pip install beautifulsoup4
</code></pre>
</div>

<p>Does that seem to have worked? Hoorah. Now let’s leave our virtual environment by typing <code class="highlighter-rouge">deactivate</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>deactivate
</code></pre>
</div>

<p><strong>CONGRATULATIONS</strong>, you’ve set up Python 3! Practically <em>everything we do this summer</em> will be easier than that process was.</p>

<h2 id="addendum-python-2-virtual-environments">Addendum: Python 2 virtual environments</h2>

<p>If you also need to use Python 2 - e.g., Mark’s class - it isn’t a problem at all! You’ll just create a virtual environment just for his class using Python 2.7.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mkvirtualenv -p python2.7 marksclass
</code></pre>
</div>

<p>If you want to get out of that virtual environment, you can use</p>

<div class="highlighter-rouge"><pre class="highlight"><code>deactivate
</code></pre>
</div>

<p>And if you want to start it back up again, use <code class="highlighter-rouge">workon</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>workon marksclass
</code></pre>
</div>

<h2 id="addendum-2-importerror-no-module-named-xxx">Addendum 2: <code class="highlighter-rouge">ImportError: No module named XXX</code></h2>

<p>This is going to happen a <strong>lot</strong> for people coming from Anaconda. Anaconda preinstalled a lot of packages for you, but now you’ll need to install them manually.</p>

<p>First, hop into the environment you’re interested in (or create one)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>workon marksclass
</code></pre>
</div>

<p>Then run <code class="highlighter-rouge">pip install</code> for every <code class="highlighter-rouge">ImportError: No module named XXX</code> module. Some common ones might be</p>

<div class="highlighter-rouge"><pre class="highlight"><code>pip install requests
pip install beautifulsoup4
pip install tweepy
pip install pandas
pip install jupyter
</code></pre>
</div>

<h2 id="when-should-we-use-virtual-environments">When should we use virtual environments?</h2>

<p>Some people use a separate virtual environment for each project they’re working on, but it might be overkill for us at the moment. I’d recommend <strong>one for my class and one for Mark’s class</strong>.</p>

<p>When you’re making Mark’s, just be sure you specify Python 2 (see above).</p>

  </article>

</div>


                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->
        <div class="newsletter-banner">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
       <p><strong>Want to hear when I release new things?</strong><br />My infrequent and sporadic newsletter can help with that.</p>
       <form style="" action="https://tinyletter.com/jsoma" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/jsoma', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true"><p><input type="text" placeholder="email@example.com" name="email" id="tlemail" /> <input type="submit" value="Get updates" /><input type="hidden" value="1" name="embed"/></p></form>
      </div>
    </div>
  </div>
</div>
<footer>
    <div class="footer">
       <div class="container">
         <div class="row">
          <div class="col-sm-12 col-md-6">
            <p><strong>Hi, I'm Soma</strong></p>
            <p>I run a <a href="http://brooklynbrainery.com">fake school in Brooklyn</a> and a <a href="http://ledeprogram.com">data journalism program</a> at Columbia University's Journalism School.</p>
            <p>I also co-host talks about food science and culture in a semi-monthly lecture series called <a href="http://omgmsg.com">Masters of Social Gastronomy</a>. We <a href="https://soundcloud.com/msgpodcast">have a podcast</a> that doesn't get updated nearly often enough, too.</p>
            <p><a href="http://tinyletter.com/jsoma">Sign up for my newsletter</a> and I will <em>definitely</em> disappoint you.</p>
          </div>
          <div class="col-sm-6 col-md-3">
            <p><strong>Track me down</strong></p>
        <ul class="social-media-list">
          
          <li>
            <i class="fa fa-envelope fa-lg" aria-hidden="true"></i>
            <a href="mailto:jonathan.soma@gmail.com">jonathan.soma@gmail.com</a>
          </li>

          <li>
            <i class="fa fa-envelope fa-lg" aria-hidden="true"></i>
            <a href="mailto:soma@brooklynbrainery.com">soma@brooklynbrainery.com</a>
          </li>

          
          <li>
            <i class="fa fa-twitter fa-lg" aria-hidden="true"></i>
            <a href="https://twitter.com/dangerscarf">
              <span class="username">dangerscarf</span>
            </a>
          </li>
          

          <li>
            <i class="fa fa-instagram fa-lg" aria-hidden="true"></i>
            <a href="https://instagram.com/dangerscarf">
              <span class="username">dangerscarf</span>
            </a>
          </li>
          
          
          <li>
            <i class="fa fa-github fa-lg" aria-hidden="true"></i>

            <a href="https://github.com/jsoma">
              <span class="username">jsoma</span>
            </a>
          </li>
          

          <li>
            <i class="fa fa-pencil-square fa-lg" aria-hidden="true"></i>
            <a href="https://tinyletter.com/jsoma">
              <span class="username">jsoma</span>
            </a>
          </li>

        </ul>
          </div>
          <div class="col-sm-6 col-md-3">
            <p><strong>Miscellaneous projects</strong></p>
            <ul>
              <li><a target="_new" href="http://www.handsomeatlas.com/">Handsome Atlas</a></li>
              <li><a target="_new" href="https://dabbles.in/">Dabbler</a></li>
              <li><a target="_new" href="http://vintagevisualizations.com/">Vintage Visualizations</a></li>
              <li><a target="_new" href="http://jonathansoma.com/singles/">Interactive Singles Map</a></li>
              <li><a target="_new" href="http://visualizing.nyc/">visualizing.nyc</a></li>
              <li><a target="_new" href="http://jonathansoma.com/open-source-language-map/">Open-Source Language Map</a></li>
          </div>
        </div>
       </div>
    </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
</footer>
    </div>

      <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-5541738-17', 'jonathansoma.com');
      ga('send', 'pageview');

    </script>
      <script>
    function setIframeHeight() {
      var remaining = false,
          iframes = document.getElementsByClassName("iframe-demo");

      for(var i = 0; i < iframes.length; i++) {
        var iframe = iframes[i],
            doc = iframe.contentDocument || iframe.contentWindow.document;

        if(doc.readyState == 'complete') {
          // console.log(doc.body.scrollHeight);
          // console.log(doc.body.offsetHeight);
          // I don't know why scrollHeight gives 150 always
          // but suddenly offsetHeight won't work?
          // 8 pixels padding isn't factored into height?
          iframe.height = doc.body.offsetHeight + 16;
          // iframe.height = doc.body.scrollHeight;
          iframe.width = doc.body.scrollWidth;
        } else {
          console.log("Not ready yet");
          remaining = true;
        }
      }

      setTimeout(setIframeHeight, 1500);

    }

    document.addEventListener("DOMContentReady", setIframeHeight)
    window.addEventListener( "load", setIframeHeight, false );

    </script>

  </body>

</html>
